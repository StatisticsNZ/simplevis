<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>More sf map examples • simplevis</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="More sf map examples">
<meta property="og:description" content="simplevis">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">simplevis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.6.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/simplevis.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/a1_colouring.html">Colouring</a>
    </li>
    <li>
      <a href="../articles/a2_interactive_graphs.html">Interactive graphs</a>
    </li>
    <li>
      <a href="../articles/a3_more_plot_examples.html">More plot examples</a>
    </li>
    <li>
      <a href="../articles/a4_more_sf_map_examples.html">More sf map examples</a>
    </li>
    <li>
      <a href="../articles/a5_shiny.html">Shiny</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/statisticsNZ/simplevis/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>More sf map examples</h1>
                        <h4 class="author">David Hodge</h4>
            
            <h4 class="date">2021-04-15</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/statisticsNZ/simplevis/blob/master/vignettes/a4_more_sf_map_examples.Rmd"><code>vignettes/a4_more_sf_map_examples.Rmd</code></a></small>
      <div class="hidden name"><code>a4_more_sf_map_examples.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">simplevis</span>)</pre></body></html></div>
<p>Spatial data can include simple features (e.g. points, lines or polygons) or arrays (e.g. raster). This article will provide examples of how to create maps of <code>sf</code> (simple feature) objects using the <code>simplevis</code> package. Example sf objects for learning are provided: <code>example_sf_point</code> and <code>example_sf_polygon</code>. The <code>simplevis</code> sf functions can plot a <code>sf</code> object with any CRS, but the CRS must be specified. An error will come up in your console if you try to plot an <code>sf</code> object that does not have a CRS specified. The <code>simplevis</code> sf functions are wrappers for the <code>ggplot2</code> and <code>leaflet</code> packages and therefore produce output of these. They work in similar ways.</p>
<p>The location of features can be plotted using <code>ggplot_sf</code>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">example_sf_point</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-2-1.png" width="576"></p>
<p>For the <code>ggplot2</code> wrapper function, a borders (e.g. administrative or coastline) can be added by adding an <code>sf</code> object to the borders argument. A <code>nz</code> (and <code>nz_region</code>) sf object are provided to illustrate this.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">example_sf_point</span>, <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-3-1.png" width="576"></p>
<p>You can add a title through the title argument.</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">example_sf_point</span>,
          <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>,
          <span class="kw">title</span> <span class="kw">=</span> <span class="st">"An informative title, 2021"</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-4-1.png" width="576"></p>
<p>You can colour variables using the <code>ggplot_sf_col</code> function.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">pal</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#0D94A3"</span>, <span class="st">"#C4C4C7"</span>, <span class="st">"#AE4E51"</span>)

<span class="fu"><a href="../reference/ggplot_sf_col.html">ggplot_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="kw">col_var</span> <span class="kw">=</span> <span class="no">trend_category</span>,
              <span class="kw">pal</span> <span class="kw">=</span> <span class="no">pal</span>, <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<p>For numeric variables, you have the option of colouring using a method of <code>quantile</code> or <code>bin</code>, and defaulting to <code>quantile</code>.</p>
<p>The <code>quantile</code> method defaults to quartiles cut using the <code>quantile</code> algorithm. But you can customise it by providing a vector to the <code>col_cuts</code> argument from 0 to 1.</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf_col.html">ggplot_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="no">median</span>,
              <span class="kw">col_method</span> <span class="kw">=</span> <span class="st">"quantile"</span>, <span class="kw">col_cuts</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="fl">0.9</span>, <span class="fl">1</span>),
              <span class="kw">col_labels_dp</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-6-1.png" width="576"></p>
<p>The <code>bin</code> method defaults to pretty breaks cut using the <code>pretty</code> algorithm. But you can customise it by providing a vector to the <code>col_cuts</code> argument from 0 to Inf (or from -Inf to Inf if the colour variable includes negative values).</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf_col.html">ggplot_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="no">median</span>,
              <span class="kw">col_method</span> <span class="kw">=</span> <span class="st">"bin"</span>,
              <span class="kw">col_cuts</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">0</span>, <span class="fl">0.25</span>, <span class="fl">1</span>, <span class="fl">Inf</span>),
              <span class="kw">col_labels_dp</span> <span class="kw">=</span> <span class="fl">2</span>, <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-7-1.png" width="576"></p>
<p>Faccetting works in a similar way to the plot functions. Note only one borders can be added in. This may not work with all use cases.</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf_facet.html">ggplot_sf_facet</a></span>(<span class="no">example_sf_point</span>, <span class="kw">facet_var</span> <span class="kw">=</span> <span class="no">trend_category</span>,
                <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-8-1.png" width="576"></p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf_col_facet.html">ggplot_sf_col_facet</a></span>(<span class="no">example_sf_point</span>, <span class="no">trend_category</span>, <span class="no">trend_category</span>,
                <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<p>Polygons or line geometry types can also be used in these sf functions.</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">example_sf_polygon</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-10-1.png" width="576"></p>
<p>As a ggplot2 object is output, you can add ggplot2 layers to the simplevis function.</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="no">long</span> <span class="kw">&lt;-</span> <span class="fl">174.686565</span>
<span class="no">lat</span> <span class="kw">&lt;-</span> -<span class="fl">41.315595</span>

<span class="no">wgtn</span> <span class="kw">&lt;-</span> <span class="kw pkg">tibble</span><span class="kw ns">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html">tibble</a></span>(<span class="no">long</span>, <span class="no">lat</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(<span class="kw">coords</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"long"</span>, <span class="st">"lat"</span>), <span class="kw">crs</span> <span class="kw">=</span> <span class="fl">4326</span>)

<span class="fu"><a href="../reference/ggplot_sf_col.html">ggplot_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="no">trend_category</span>,
              <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>) +
  <span class="kw pkg">ggplot2</span><span class="kw ns">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html">geom_sf</a></span>(<span class="kw">data</span> <span class="kw">=</span> <span class="no">wgtn</span>, <span class="kw">size</span> <span class="kw">=</span> <span class="fl">5</span>, <span class="kw">col</span> <span class="kw">=</span> <span class="st">"red"</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-11-1.png" width="576"></p>
<p>Make a non-facetted plot for a mobile device. Note the template shiny apps provide a function to detect what device the user is on and returns a TRUE or FALSE value that you can draw on with isMobile = input$isMobile within a shiny app.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r"><span class="fu"><a href="../reference/ggplot_sf_col.html">ggplot_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="no">trend_category</span>,
              <span class="kw">borders</span> <span class="kw">=</span> <span class="no">nz</span>, <span class="kw">isMobile</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-12-1.png" width="576"></p>
<p>The leaflet functions work in a similar way to the <code>ggplot2</code> wrapper functions.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r"><span class="fu"><a href="../reference/leaflet_sf.html">leaflet_sf</a></span>(<span class="no">example_sf_point</span>)</pre></body></html></div>
<p>Instead of a <code>borders</code> argument, users have a <code>basemap</code> argument that defaults to “light” but has other options.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r"><span class="fu"><a href="../reference/leaflet_sf.html">leaflet_sf</a></span>(<span class="no">example_sf_point</span>, <span class="kw">basemap</span> <span class="kw">=</span> <span class="st">"dark"</span>)</pre></body></html></div>
<p>There is no facetting functionality provided for leaflet.</p>
<p>Some of the arguments are different between the leaflet and ggplot2 wrapper functions. This is because it has been opted to preserve the underlying arguments generally, so that users can add additional layers.</p>
<p>Note the default popups will wrap all variable names and values from the sf object.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r"><span class="fu"><a href="../reference/leaflet_sf_col.html">leaflet_sf_col</a></span>(<span class="no">example_sf_point</span>, <span class="kw">col_var</span> <span class="kw">=</span> <span class="no">trend_category</span>,
              <span class="kw">pal</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"#0D94A3"</span>, <span class="st">"#C4C4C7"</span>, <span class="st">"#AE4E51"</span>))</pre></body></html></div>
<p>The <code>rnaturalearth</code> package is a great source of country and state borders.</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="no">sf</span> <span class="kw">&lt;-</span> <span class="kw pkg">rnaturalearth</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html">ne_countries</a></span>(<span class="kw">scale</span> <span class="kw">=</span> <span class="st">"medium"</span>, <span class="kw">country</span> <span class="kw">=</span> <span class="st">"Indonesia"</span>, <span class="kw">returnclass</span> <span class="kw">=</span> <span class="st">"sf"</span>)

<span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">sf</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">line_size</span> <span class="kw">=</span> <span class="fl">0.3</span>, <span class="kw">pal</span> <span class="kw">=</span> <span class="st">"#232323"</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-16-1.png" width="576"></p>
<div class="sourceCode" id="cb17"><html><body><pre class="r"><span class="no">sf</span> <span class="kw">&lt;-</span> <span class="kw pkg">rnaturalearth</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_states.html">ne_states</a></span>(<span class="kw">country</span> <span class="kw">=</span> <span class="st">"India"</span>, <span class="kw">returnclass</span> <span class="kw">=</span> <span class="st">"sf"</span>)

<span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">sf</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">line_size</span> <span class="kw">=</span> <span class="fl">0.3</span>, <span class="kw">pal</span> <span class="kw">=</span> <span class="st">"#232323"</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-17-1.png" width="576"></p>
<div class="sourceCode" id="cb18"><html><body><pre class="r"><span class="no">sf</span> <span class="kw">&lt;-</span> <span class="kw pkg">rnaturalearth</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_states.html">ne_states</a></span>(<span class="kw">country</span> <span class="kw">=</span> <span class="st">"Australia"</span>, <span class="kw">returnclass</span> <span class="kw">=</span> <span class="st">"sf"</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">.data</span>$<span class="no">name</span> <span class="kw">==</span> <span class="st">"Tasmania"</span>)

<span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">sf</span>, <span class="kw">alpha</span> <span class="kw">=</span> <span class="fl">0</span>, <span class="kw">pal</span> <span class="kw">=</span> <span class="st">"#232323"</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-18-1.png" width="576"></p>
<p>A leaflet basemap is available for use in shiny apps. It defaults to the top layer being “light”.</p>
<div class="sourceCode" id="cb19"><html><body><pre class="r"><span class="kw pkg">simplevis</span><span class="kw ns">::</span><span class="fu"><a href="../reference/leaflet_basemap.html">leaflet_basemap</a></span>()</pre></body></html></div>
<p>You can set the bounds by adding a vector or bbox of bounds.</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="../reference/leaflet_basemap.html">leaflet_basemap</a></span>(<span class="kw">bounds</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">166.70047</span>,-<span class="fl">34.45676</span>, <span class="fl">178.52966</span>,-<span class="fl">47.06345</span>))

<span class="no">bb</span> <span class="kw">&lt;-</span> <span class="kw pkg">rnaturalearth</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html">ne_countries</a></span>(<span class="kw">scale</span> <span class="kw">=</span> <span class="st">"small"</span>, <span class="kw">country</span> <span class="kw">=</span> <span class="st">"Indonesia"</span>, <span class="kw">returnclass</span> <span class="kw">=</span> <span class="st">"sf"</span>) <span class="kw">%&gt;%</span>
   <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_bbox.html">st_bbox</a></span>()

<span class="kw pkg">simplevis</span><span class="kw ns">::</span><span class="fu"><a href="../reference/leaflet_basemap.html">leaflet_basemap</a></span>(<span class="st">"satellite"</span>, <span class="kw">bounds</span> <span class="kw">=</span> <span class="no">bb</span>)</pre></body></html></div>
<p>Note if you are mapping across the dateline, use <code><a href="https://rdrr.io/pkg/sf/man/st_shift_longitude.html">sf::st_shift_longitude</a></code>.</p>
<div class="sourceCode" id="cb21"><html><body><pre class="r"><span class="no">sf</span> <span class="kw">&lt;-</span> <span class="kw pkg">rnaturalearth</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html">ne_countries</a></span>(<span class="kw">scale</span> <span class="kw">=</span> <span class="st">"medium"</span>, <span class="kw">country</span> <span class="kw">=</span> <span class="st">"New Zealand"</span>, <span class="kw">returnclass</span> <span class="kw">=</span> <span class="st">"sf"</span>)

<span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="no">sf</span>)</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-21-1.png" width="576"></p>
<div class="sourceCode" id="cb22"><html><body><pre class="r">
<span class="fu"><a href="../reference/ggplot_sf.html">ggplot_sf</a></span>(<span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_shift_longitude.html">st_shift_longitude</a></span>(<span class="no">sf</span>))</pre></body></html></div>
<p><img src="a4_more_sf_map_examples_files/figure-html/unnamed-chunk-21-2.png" width="576"></p>
<p>Shapesfiles can be read in using the <code><a href="https://rdrr.io/pkg/sf/man/st_read.html">sf::st_read</a></code> function. Point vector data is often provided as a <code>csv</code>. In this situation, the data.frame can be read in using <code><a href="https://readr.tidyverse.org/reference/read_delim.html">readr::read_csv</a></code> by converting the <code>data.frame</code> to a <code>sf</code> object by identifying the <code>x</code> and <code>y</code> geometry column names and the Coordinate Reference System (CRS) epsg code that these relate to. For longs and lats, the CRS is 4326. There are multiple other CRS’ available (e.g. 2193 for the <code>New Zealand Transverse Mercator</code>). A small example shapefile is available for download at <code>https://data.mfe.govt.nz/layer/53494-benthic-protection-areas-2016-report/data/</code>.</p>
<div class="sourceCode" id="cb23"><html><body><pre class="r">
<span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_read.html">st_read</a></span>(<span class="st">"shapefile_name.shp"</span>)

<span class="kw pkg">readr</span><span class="kw ns">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span>(<span class="st">"point_data.csv"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">sf</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_as_sf.html">st_as_sf</a></span>(<span class="kw">coords</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"nztme"</span>, <span class="st">"nztmn"</span>), <span class="kw">crs</span> <span class="kw">=</span> <span class="fl">2193</span>)</pre></body></html></div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by David Hodge.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.0.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
